{"id":"e6iS","dependencies":[{"name":"D:\\WorkSpace\\Side project\\auto-update-apod\\package.json","includedInParent":true,"mtime":1622575343702},{"name":"D:\\WorkSpace\\Side project\\auto-update-apod\\node_modules\\cloudinary\\package.json","includedInParent":true,"mtime":1622387572969},{"name":"crypto","loc":{"line":8,"column":21},"parent":"D:\\WorkSpace\\Side project\\auto-update-apod\\node_modules\\cloudinary\\lib-es5\\auth_token.js","resolved":"D:\\WorkSpace\\Side project\\auto-update-apod\\node_modules\\crypto-browserify\\index.js"},{"name":"./utils/encoding/smart_escape","loc":{"line":9,"column":27},"parent":"D:\\WorkSpace\\Side project\\auto-update-apod\\node_modules\\cloudinary\\lib-es5\\auth_token.js","resolved":"D:\\WorkSpace\\Side project\\auto-update-apod\\node_modules\\cloudinary\\lib-es5\\utils\\encoding\\smart_escape.js"},{"name":"buffer","parent":"D:\\WorkSpace\\Side project\\auto-update-apod\\node_modules\\cloudinary\\lib-es5\\auth_token.js","resolved":"D:\\WorkSpace\\Side project\\auto-update-apod\\node_modules\\node-libs-browser\\node_modules\\buffer\\index.js"}],"generated":{"js":"var Buffer = require(\"buffer\").Buffer;\nvar r=require(\"buffer\").Buffer,e=require(\"crypto\"),t=require(\"./utils/encoding/smart_escape\"),n=/([ \"#%&'/:;<=>?@[\\]^`{|}~]+)/g;function a(t,n){return e.createHmac(\"sha256\",r.from(n,\"hex\")).update(t).digest(\"hex\")}function u(r){return t(r,n).replace(/%../g,function(r){return r.toLowerCase()})}module.exports=function(r){var e=r.token_name?r.token_name:\"__cld_token__\";if(null==r.expiration){if(null==r.duration)throw new Error(\"Must provide either expiration or duration\");var t=null!=r.start_time?r.start_time:Math.round(Date.now()/1e3);r.expiration=t+r.duration}var n=[];null!=r.ip&&n.push(`ip=${r.ip}`),null!=r.start_time&&n.push(`st=${r.start_time}`),n.push(`exp=${r.expiration}`),null!=r.acl&&n.push(`acl=${u(r.acl)}`);var i=[].concat(n);if(null!=r.url&&null==r.acl){var o=u(r.url);i.push(`url=${o}`)}var l=a(i.join(\"~\"),r.key);if(n.push(`hmac=${l}`),!r.url&&!r.acl)throw\"authToken must contain either an acl or a url property\";return`${e}=${n.join(\"~\")}`};"},"sourceMaps":{"js":{"mappings":[{"source":"node_modules/cloudinary/lib-es5/auth_token.js","original":{"line":48,"column":0},"generated":{"line":2,"column":0}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","original":{"line":48,"column":0},"generated":{"line":2,"column":4}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","original":{"line":48,"column":0},"generated":{"line":2,"column":6}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","original":{"line":48,"column":0},"generated":{"line":2,"column":14}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","original":{"line":48,"column":0},"generated":{"line":2,"column":24}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","name":"crypto","original":{"line":8,"column":4},"generated":{"line":2,"column":31}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","name":"require","original":{"line":8,"column":13},"generated":{"line":2,"column":33}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","original":{"line":8,"column":21},"generated":{"line":2,"column":41}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","name":"smart_escape","original":{"line":9,"column":4},"generated":{"line":2,"column":51}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","name":"require","original":{"line":9,"column":19},"generated":{"line":2,"column":53}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","original":{"line":9,"column":27},"generated":{"line":2,"column":61}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","name":"unsafe","original":{"line":11,"column":4},"generated":{"line":2,"column":94}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","original":{"line":11,"column":13},"generated":{"line":2,"column":96}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","original":{"line":13,"column":0},"generated":{"line":2,"column":128}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","name":"digest","original":{"line":13,"column":9},"generated":{"line":2,"column":137}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","name":"message","original":{"line":13,"column":16},"generated":{"line":2,"column":139}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","name":"key","original":{"line":13,"column":25},"generated":{"line":2,"column":141}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","name":"crypto","original":{"line":14,"column":9},"generated":{"line":2,"column":144}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","name":"crypto","original":{"line":14,"column":9},"generated":{"line":2,"column":151}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","name":"createHmac","original":{"line":14,"column":16},"generated":{"line":2,"column":153}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","original":{"line":14,"column":27},"generated":{"line":2,"column":164}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","name":"Buffer","original":{"line":14,"column":37},"generated":{"line":2,"column":173}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","name":"from","original":{"line":14,"column":44},"generated":{"line":2,"column":175}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","name":"key","original":{"line":14,"column":49},"generated":{"line":2,"column":180}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","original":{"line":14,"column":54},"generated":{"line":2,"column":182}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","name":"update","original":{"line":14,"column":62},"generated":{"line":2,"column":190}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","name":"message","original":{"line":14,"column":69},"generated":{"line":2,"column":197}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","name":"digest","original":{"line":14,"column":78},"generated":{"line":2,"column":200}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","original":{"line":14,"column":85},"generated":{"line":2,"column":207}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","original":{"line":22,"column":0},"generated":{"line":2,"column":214}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","name":"escapeToLower","original":{"line":22,"column":9},"generated":{"line":2,"column":223}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","name":"url","original":{"line":22,"column":23},"generated":{"line":2,"column":225}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","name":"safeUrl","original":{"line":24,"column":9},"generated":{"line":2,"column":228}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","name":"smart_escape","original":{"line":23,"column":16},"generated":{"line":2,"column":235}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","name":"url","original":{"line":23,"column":29},"generated":{"line":2,"column":237}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","name":"unsafe","original":{"line":23,"column":34},"generated":{"line":2,"column":239}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","name":"replace","original":{"line":24,"column":17},"generated":{"line":2,"column":242}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","original":{"line":24,"column":25},"generated":{"line":2,"column":250}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","original":{"line":24,"column":33},"generated":{"line":2,"column":257}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","name":"match","original":{"line":24,"column":43},"generated":{"line":2,"column":266}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","name":"match","original":{"line":25,"column":11},"generated":{"line":2,"column":269}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","name":"match","original":{"line":25,"column":11},"generated":{"line":2,"column":276}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","name":"toLowerCase","original":{"line":25,"column":17},"generated":{"line":2,"column":278}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","name":"module","original":{"line":48,"column":0},"generated":{"line":2,"column":294}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","name":"exports","original":{"line":48,"column":7},"generated":{"line":2,"column":301}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","original":{"line":48,"column":17},"generated":{"line":2,"column":309}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","name":"options","original":{"line":48,"column":27},"generated":{"line":2,"column":318}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","name":"tokenName","original":{"line":49,"column":6},"generated":{"line":2,"column":321}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","name":"tokenName","original":{"line":49,"column":6},"generated":{"line":2,"column":325}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","name":"options","original":{"line":49,"column":18},"generated":{"line":2,"column":327}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","name":"token_name","original":{"line":49,"column":26},"generated":{"line":2,"column":329}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","name":"options","original":{"line":49,"column":39},"generated":{"line":2,"column":340}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","name":"token_name","original":{"line":49,"column":47},"generated":{"line":2,"column":342}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","original":{"line":49,"column":60},"generated":{"line":2,"column":353}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","name":"options","original":{"line":51,"column":6},"generated":{"line":2,"column":369}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","original":{"line":51,"column":28},"generated":{"line":2,"column":372}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","name":"options","original":{"line":51,"column":6},"generated":{"line":2,"column":378}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","name":"expiration","original":{"line":51,"column":14},"generated":{"line":2,"column":380}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","original":{"line":51,"column":34},"generated":{"line":2,"column":391}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","name":"options","original":{"line":52,"column":8},"generated":{"line":2,"column":392}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","original":{"line":52,"column":28},"generated":{"line":2,"column":395}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","name":"options","original":{"line":52,"column":8},"generated":{"line":2,"column":401}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","name":"duration","original":{"line":52,"column":16},"generated":{"line":2,"column":403}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","original":{"line":56,"column":12},"generated":{"line":2,"column":412}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","original":{"line":56,"column":12},"generated":{"line":2,"column":418}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","name":"Error","original":{"line":56,"column":16},"generated":{"line":2,"column":422}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","original":{"line":56,"column":22},"generated":{"line":2,"column":428}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","name":"start","original":{"line":53,"column":10},"generated":{"line":2,"column":474}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","name":"start","original":{"line":53,"column":10},"generated":{"line":2,"column":478}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","original":{"line":53,"column":40},"generated":{"line":2,"column":480}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","name":"options","original":{"line":53,"column":18},"generated":{"line":2,"column":486}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","name":"start_time","original":{"line":53,"column":26},"generated":{"line":2,"column":488}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","name":"options","original":{"line":53,"column":47},"generated":{"line":2,"column":499}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","name":"start_time","original":{"line":53,"column":55},"generated":{"line":2,"column":501}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","name":"Math","original":{"line":53,"column":68},"generated":{"line":2,"column":512}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","name":"round","original":{"line":53,"column":73},"generated":{"line":2,"column":517}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","name":"Date","original":{"line":53,"column":79},"generated":{"line":2,"column":523}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","name":"now","original":{"line":53,"column":84},"generated":{"line":2,"column":528}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","original":{"line":53,"column":92},"generated":{"line":2,"column":534}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","name":"options","original":{"line":54,"column":6},"generated":{"line":2,"column":539}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","name":"expiration","original":{"line":54,"column":14},"generated":{"line":2,"column":541}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","name":"start","original":{"line":54,"column":27},"generated":{"line":2,"column":552}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","name":"options","original":{"line":54,"column":35},"generated":{"line":2,"column":554}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","name":"duration","original":{"line":54,"column":43},"generated":{"line":2,"column":556}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","name":"tokenParts","original":{"line":59,"column":6},"generated":{"line":2,"column":565}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","name":"tokenParts","original":{"line":59,"column":6},"generated":{"line":2,"column":569}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","original":{"line":59,"column":19},"generated":{"line":2,"column":571}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","original":{"line":60,"column":20},"generated":{"line":2,"column":574}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","name":"options","original":{"line":60,"column":6},"generated":{"line":2,"column":580}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","name":"ip","original":{"line":60,"column":14},"generated":{"line":2,"column":582}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","name":"tokenParts","original":{"line":61,"column":4},"generated":{"line":2,"column":586}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","name":"push","original":{"line":61,"column":15},"generated":{"line":2,"column":588}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","name":"options","original":{"line":61,"column":26},"generated":{"line":2,"column":599}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","name":"ip","original":{"line":61,"column":34},"generated":{"line":2,"column":601}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","original":{"line":63,"column":28},"generated":{"line":2,"column":607}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","name":"options","original":{"line":63,"column":6},"generated":{"line":2,"column":613}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","name":"start_time","original":{"line":63,"column":14},"generated":{"line":2,"column":615}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","name":"tokenParts","original":{"line":64,"column":4},"generated":{"line":2,"column":627}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","name":"push","original":{"line":64,"column":15},"generated":{"line":2,"column":629}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","name":"options","original":{"line":64,"column":26},"generated":{"line":2,"column":640}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","name":"start_time","original":{"line":64,"column":34},"generated":{"line":2,"column":642}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","name":"tokenParts","original":{"line":66,"column":2},"generated":{"line":2,"column":656}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","name":"push","original":{"line":66,"column":13},"generated":{"line":2,"column":658}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","name":"options","original":{"line":66,"column":25},"generated":{"line":2,"column":670}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","name":"expiration","original":{"line":66,"column":33},"generated":{"line":2,"column":672}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","original":{"line":67,"column":21},"generated":{"line":2,"column":686}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","name":"options","original":{"line":67,"column":6},"generated":{"line":2,"column":692}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","name":"acl","original":{"line":67,"column":14},"generated":{"line":2,"column":694}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","name":"tokenParts","original":{"line":68,"column":4},"generated":{"line":2,"column":699}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","name":"push","original":{"line":68,"column":15},"generated":{"line":2,"column":701}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","name":"escapeToLower","original":{"line":68,"column":27},"generated":{"line":2,"column":713}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","name":"options","original":{"line":68,"column":41},"generated":{"line":2,"column":715}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","name":"acl","original":{"line":68,"column":49},"generated":{"line":2,"column":717}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","name":"toSign","original":{"line":70,"column":6},"generated":{"line":2,"column":725}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","name":"toSign","original":{"line":70,"column":6},"generated":{"line":2,"column":729}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","original":{"line":70,"column":15},"generated":{"line":2,"column":731}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","name":"concat","original":{"line":70,"column":18},"generated":{"line":2,"column":734}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","name":"tokenParts","original":{"line":70,"column":25},"generated":{"line":2,"column":741}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","name":"options","original":{"line":71,"column":6},"generated":{"line":2,"column":744}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","original":{"line":71,"column":21},"generated":{"line":2,"column":747}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","name":"options","original":{"line":71,"column":6},"generated":{"line":2,"column":753}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","name":"url","original":{"line":71,"column":14},"generated":{"line":2,"column":755}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","original":{"line":71,"column":44},"generated":{"line":2,"column":760}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","name":"options","original":{"line":71,"column":29},"generated":{"line":2,"column":766}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","name":"acl","original":{"line":71,"column":37},"generated":{"line":2,"column":768}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","original":{"line":71,"column":50},"generated":{"line":2,"column":772}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","name":"url","original":{"line":72,"column":8},"generated":{"line":2,"column":773}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","name":"url","original":{"line":72,"column":8},"generated":{"line":2,"column":777}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","name":"escapeToLower","original":{"line":72,"column":14},"generated":{"line":2,"column":779}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","name":"options","original":{"line":72,"column":28},"generated":{"line":2,"column":781}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","name":"url","original":{"line":72,"column":36},"generated":{"line":2,"column":783}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","name":"toSign","original":{"line":73,"column":4},"generated":{"line":2,"column":788}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","name":"push","original":{"line":73,"column":11},"generated":{"line":2,"column":790}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","name":"url","original":{"line":73,"column":23},"generated":{"line":2,"column":802}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","name":"auth","original":{"line":75,"column":6},"generated":{"line":2,"column":807}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","name":"auth","original":{"line":75,"column":6},"generated":{"line":2,"column":811}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","name":"digest","original":{"line":75,"column":13},"generated":{"line":2,"column":813}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","name":"toSign","original":{"line":75,"column":20},"generated":{"line":2,"column":815}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","name":"join","original":{"line":75,"column":27},"generated":{"line":2,"column":817}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","original":{"line":50,"column":23},"generated":{"line":2,"column":822}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","name":"options","original":{"line":75,"column":49},"generated":{"line":2,"column":827}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","name":"key","original":{"line":75,"column":57},"generated":{"line":2,"column":829}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","original":{"line":78,"column":6},"generated":{"line":2,"column":834}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","name":"tokenParts","original":{"line":76,"column":2},"generated":{"line":2,"column":837}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","name":"push","original":{"line":76,"column":13},"generated":{"line":2,"column":839}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","name":"auth","original":{"line":76,"column":26},"generated":{"line":2,"column":852}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","name":"options","original":{"line":78,"column":7},"generated":{"line":2,"column":858}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","name":"url","original":{"line":78,"column":15},"generated":{"line":2,"column":860}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","name":"options","original":{"line":78,"column":23},"generated":{"line":2,"column":866}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","name":"acl","original":{"line":78,"column":31},"generated":{"line":2,"column":868}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","original":{"line":79,"column":10},"generated":{"line":2,"column":872}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","original":{"line":79,"column":10},"generated":{"line":2,"column":877}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","original":{"line":82,"column":10},"generated":{"line":2,"column":934}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","name":"tokenName","original":{"line":82,"column":12},"generated":{"line":2,"column":943}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","name":"tokenParts","original":{"line":82,"column":25},"generated":{"line":2,"column":948}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","name":"join","original":{"line":82,"column":36},"generated":{"line":2,"column":950}},{"source":"node_modules/cloudinary/lib-es5/auth_token.js","original":{"line":50,"column":23},"generated":{"line":2,"column":955}}],"sources":{"node_modules/cloudinary/lib-es5/auth_token.js":"'use strict';\n\n/**\n * Authorization Token\n * @module auth_token\n */\n\nvar crypto = require('crypto');\nvar smart_escape = require('./utils/encoding/smart_escape');\n\nvar unsafe = /([ \"#%&'/:;<=>?@[\\]^`{|}~]+)/g;\n\nfunction digest(message, key) {\n  return crypto.createHmac(\"sha256\", Buffer.from(key, \"hex\")).update(message).digest('hex');\n}\n\n/**\n * Escape url using lowercase hex code\n * @param {string} url a url string\n * @return {string} escaped url\n */\nfunction escapeToLower(url) {\n  var safeUrl = smart_escape(url, unsafe);\n  return safeUrl.replace(/%../g, function (match) {\n    return match.toLowerCase();\n  });\n}\n\n/**\n * Auth token options\n * @typedef {object} authTokenOptions\n * @property {string} [token_name=\"__cld_token__\"] The name of the token.\n * @property {string} key The secret key required to sign the token.\n * @property {string} ip The IP address of the client.\n * @property {number} start_time=now The start time of the token in seconds from epoch.\n * @property {string} expiration The expiration time of the token in seconds from epoch.\n * @property {string} duration The duration of the token (from start_time).\n * @property {string} acl The ACL for the token.\n * @property {string} url The URL to authentication in case of a URL token.\n *\n */\n\n/**\n * Generate an authorization token\n * @param {authTokenOptions} options\n * @returns {string} the authorization token\n */\nmodule.exports = function (options) {\n  var tokenName = options.token_name ? options.token_name : \"__cld_token__\";\n  var tokenSeparator = \"~\";\n  if (options.expiration == null) {\n    if (options.duration != null) {\n      var start = options.start_time != null ? options.start_time : Math.round(Date.now() / 1000);\n      options.expiration = start + options.duration;\n    } else {\n      throw new Error(\"Must provide either expiration or duration\");\n    }\n  }\n  var tokenParts = [];\n  if (options.ip != null) {\n    tokenParts.push(`ip=${options.ip}`);\n  }\n  if (options.start_time != null) {\n    tokenParts.push(`st=${options.start_time}`);\n  }\n  tokenParts.push(`exp=${options.expiration}`);\n  if (options.acl != null) {\n    tokenParts.push(`acl=${escapeToLower(options.acl)}`);\n  }\n  var toSign = [].concat(tokenParts);\n  if (options.url != null && options.acl == null) {\n    var url = escapeToLower(options.url);\n    toSign.push(`url=${url}`);\n  }\n  var auth = digest(toSign.join(tokenSeparator), options.key);\n  tokenParts.push(`hmac=${auth}`);\n\n  if (!options.url && !options.acl) {\n    throw 'authToken must contain either an acl or a url property';\n  }\n\n  return `${tokenName}=${tokenParts.join(tokenSeparator)}`;\n};"},"lineCount":null}},"error":null,"hash":"1e26452918497fbb6bc66938f7c7eaf1","cacheData":{"env":{}}}