{"id":"FLgy","dependencies":[{"name":"D:\\WorkSpace\\Side project\\auto-update-apod\\package.json","includedInParent":true,"mtime":1622575343702},{"name":"D:\\WorkSpace\\Side project\\auto-update-apod\\node_modules\\cloudinary\\package.json","includedInParent":true,"mtime":1622387572969},{"name":"crypto","loc":{"line":6,"column":23},"parent":"D:\\WorkSpace\\Side project\\auto-update-apod\\node_modules\\cloudinary\\lib\\auth_token.js","resolved":"D:\\WorkSpace\\Side project\\auto-update-apod\\node_modules\\crypto-browserify\\index.js"},{"name":"./utils/encoding/smart_escape","loc":{"line":7,"column":29},"parent":"D:\\WorkSpace\\Side project\\auto-update-apod\\node_modules\\cloudinary\\lib\\auth_token.js","resolved":"D:\\WorkSpace\\Side project\\auto-update-apod\\node_modules\\cloudinary\\lib\\utils\\encoding\\smart_escape.js"},{"name":"buffer","parent":"D:\\WorkSpace\\Side project\\auto-update-apod\\node_modules\\cloudinary\\lib\\auth_token.js","resolved":"D:\\WorkSpace\\Side project\\auto-update-apod\\node_modules\\node-libs-browser\\node_modules\\buffer\\index.js"}],"generated":{"js":"var Buffer = require(\"buffer\").Buffer;\nvar e=require(\"buffer\").Buffer;const t=require(\"crypto\"),r=require(\"./utils/encoding/smart_escape\"),n=/([ \"#%&'/:;<=>?@[\\]^`{|}~]+)/g;function u(r,n){return t.createHmac(\"sha256\",e.from(n,\"hex\")).update(r).digest(\"hex\")}function i(e){return r(e,n).replace(/%../g,function(e){return e.toLowerCase()})}module.exports=function(e){const t=e.token_name?e.token_name:\"__cld_token__\";if(null==e.expiration){if(null==e.duration)throw new Error(\"Must provide either expiration or duration\");{let t=null!=e.start_time?e.start_time:Math.round(Date.now()/1e3);e.expiration=t+e.duration}}let r=[];null!=e.ip&&r.push(`ip=${e.ip}`),null!=e.start_time&&r.push(`st=${e.start_time}`),r.push(`exp=${e.expiration}`),null!=e.acl&&r.push(`acl=${i(e.acl)}`);let n=[...r];if(null!=e.url&&null==e.acl){let t=i(e.url);n.push(`url=${t}`)}let l=u(n.join(\"~\"),e.key);if(r.push(`hmac=${l}`),!e.url&&!e.acl)throw\"authToken must contain either an acl or a url property\";return`${t}=${r.join(\"~\")}`};"},"sourceMaps":{"js":{"mappings":[{"source":"node_modules/cloudinary/lib/auth_token.js","original":{"line":46,"column":0},"generated":{"line":2,"column":0}},{"source":"node_modules/cloudinary/lib/auth_token.js","original":{"line":46,"column":0},"generated":{"line":2,"column":4}},{"source":"node_modules/cloudinary/lib/auth_token.js","original":{"line":46,"column":0},"generated":{"line":2,"column":6}},{"source":"node_modules/cloudinary/lib/auth_token.js","original":{"line":46,"column":0},"generated":{"line":2,"column":14}},{"source":"node_modules/cloudinary/lib/auth_token.js","original":{"line":46,"column":0},"generated":{"line":2,"column":24}},{"source":"node_modules/cloudinary/lib/auth_token.js","original":{"line":6,"column":0},"generated":{"line":2,"column":31}},{"source":"node_modules/cloudinary/lib/auth_token.js","name":"crypto","original":{"line":6,"column":6},"generated":{"line":2,"column":37}},{"source":"node_modules/cloudinary/lib/auth_token.js","name":"require","original":{"line":6,"column":15},"generated":{"line":2,"column":39}},{"source":"node_modules/cloudinary/lib/auth_token.js","original":{"line":6,"column":23},"generated":{"line":2,"column":47}},{"source":"node_modules/cloudinary/lib/auth_token.js","name":"smart_escape","original":{"line":7,"column":6},"generated":{"line":2,"column":57}},{"source":"node_modules/cloudinary/lib/auth_token.js","name":"require","original":{"line":7,"column":21},"generated":{"line":2,"column":59}},{"source":"node_modules/cloudinary/lib/auth_token.js","original":{"line":7,"column":29},"generated":{"line":2,"column":67}},{"source":"node_modules/cloudinary/lib/auth_token.js","name":"unsafe","original":{"line":9,"column":6},"generated":{"line":2,"column":100}},{"source":"node_modules/cloudinary/lib/auth_token.js","original":{"line":9,"column":15},"generated":{"line":2,"column":102}},{"source":"node_modules/cloudinary/lib/auth_token.js","original":{"line":11,"column":0},"generated":{"line":2,"column":134}},{"source":"node_modules/cloudinary/lib/auth_token.js","name":"digest","original":{"line":11,"column":9},"generated":{"line":2,"column":143}},{"source":"node_modules/cloudinary/lib/auth_token.js","name":"message","original":{"line":11,"column":16},"generated":{"line":2,"column":145}},{"source":"node_modules/cloudinary/lib/auth_token.js","name":"key","original":{"line":11,"column":25},"generated":{"line":2,"column":147}},{"source":"node_modules/cloudinary/lib/auth_token.js","name":"crypto","original":{"line":12,"column":9},"generated":{"line":2,"column":150}},{"source":"node_modules/cloudinary/lib/auth_token.js","name":"crypto","original":{"line":12,"column":9},"generated":{"line":2,"column":157}},{"source":"node_modules/cloudinary/lib/auth_token.js","name":"createHmac","original":{"line":12,"column":16},"generated":{"line":2,"column":159}},{"source":"node_modules/cloudinary/lib/auth_token.js","original":{"line":12,"column":27},"generated":{"line":2,"column":170}},{"source":"node_modules/cloudinary/lib/auth_token.js","name":"Buffer","original":{"line":12,"column":37},"generated":{"line":2,"column":179}},{"source":"node_modules/cloudinary/lib/auth_token.js","name":"from","original":{"line":12,"column":44},"generated":{"line":2,"column":181}},{"source":"node_modules/cloudinary/lib/auth_token.js","name":"key","original":{"line":12,"column":49},"generated":{"line":2,"column":186}},{"source":"node_modules/cloudinary/lib/auth_token.js","original":{"line":12,"column":54},"generated":{"line":2,"column":188}},{"source":"node_modules/cloudinary/lib/auth_token.js","name":"update","original":{"line":12,"column":62},"generated":{"line":2,"column":196}},{"source":"node_modules/cloudinary/lib/auth_token.js","name":"message","original":{"line":12,"column":69},"generated":{"line":2,"column":203}},{"source":"node_modules/cloudinary/lib/auth_token.js","name":"digest","original":{"line":12,"column":78},"generated":{"line":2,"column":206}},{"source":"node_modules/cloudinary/lib/auth_token.js","original":{"line":12,"column":85},"generated":{"line":2,"column":213}},{"source":"node_modules/cloudinary/lib/auth_token.js","original":{"line":20,"column":0},"generated":{"line":2,"column":220}},{"source":"node_modules/cloudinary/lib/auth_token.js","name":"escapeToLower","original":{"line":20,"column":9},"generated":{"line":2,"column":229}},{"source":"node_modules/cloudinary/lib/auth_token.js","name":"url","original":{"line":20,"column":23},"generated":{"line":2,"column":231}},{"source":"node_modules/cloudinary/lib/auth_token.js","name":"safeUrl","original":{"line":22,"column":9},"generated":{"line":2,"column":234}},{"source":"node_modules/cloudinary/lib/auth_token.js","name":"smart_escape","original":{"line":21,"column":18},"generated":{"line":2,"column":241}},{"source":"node_modules/cloudinary/lib/auth_token.js","name":"url","original":{"line":21,"column":31},"generated":{"line":2,"column":243}},{"source":"node_modules/cloudinary/lib/auth_token.js","name":"unsafe","original":{"line":21,"column":36},"generated":{"line":2,"column":245}},{"source":"node_modules/cloudinary/lib/auth_token.js","name":"replace","original":{"line":22,"column":17},"generated":{"line":2,"column":248}},{"source":"node_modules/cloudinary/lib/auth_token.js","original":{"line":22,"column":25},"generated":{"line":2,"column":256}},{"source":"node_modules/cloudinary/lib/auth_token.js","original":{"line":22,"column":33},"generated":{"line":2,"column":263}},{"source":"node_modules/cloudinary/lib/auth_token.js","name":"match","original":{"line":22,"column":43},"generated":{"line":2,"column":272}},{"source":"node_modules/cloudinary/lib/auth_token.js","name":"match","original":{"line":23,"column":11},"generated":{"line":2,"column":275}},{"source":"node_modules/cloudinary/lib/auth_token.js","name":"match","original":{"line":23,"column":11},"generated":{"line":2,"column":282}},{"source":"node_modules/cloudinary/lib/auth_token.js","name":"toLowerCase","original":{"line":23,"column":17},"generated":{"line":2,"column":284}},{"source":"node_modules/cloudinary/lib/auth_token.js","name":"module","original":{"line":46,"column":0},"generated":{"line":2,"column":300}},{"source":"node_modules/cloudinary/lib/auth_token.js","name":"exports","original":{"line":46,"column":7},"generated":{"line":2,"column":307}},{"source":"node_modules/cloudinary/lib/auth_token.js","original":{"line":46,"column":17},"generated":{"line":2,"column":315}},{"source":"node_modules/cloudinary/lib/auth_token.js","name":"options","original":{"line":46,"column":27},"generated":{"line":2,"column":324}},{"source":"node_modules/cloudinary/lib/auth_token.js","name":"tokenName","original":{"line":47,"column":8},"generated":{"line":2,"column":327}},{"source":"node_modules/cloudinary/lib/auth_token.js","name":"tokenName","original":{"line":47,"column":8},"generated":{"line":2,"column":333}},{"source":"node_modules/cloudinary/lib/auth_token.js","name":"options","original":{"line":47,"column":20},"generated":{"line":2,"column":335}},{"source":"node_modules/cloudinary/lib/auth_token.js","name":"token_name","original":{"line":47,"column":28},"generated":{"line":2,"column":337}},{"source":"node_modules/cloudinary/lib/auth_token.js","name":"options","original":{"line":47,"column":41},"generated":{"line":2,"column":348}},{"source":"node_modules/cloudinary/lib/auth_token.js","name":"token_name","original":{"line":47,"column":49},"generated":{"line":2,"column":350}},{"source":"node_modules/cloudinary/lib/auth_token.js","original":{"line":47,"column":62},"generated":{"line":2,"column":361}},{"source":"node_modules/cloudinary/lib/auth_token.js","name":"options","original":{"line":49,"column":6},"generated":{"line":2,"column":377}},{"source":"node_modules/cloudinary/lib/auth_token.js","original":{"line":49,"column":28},"generated":{"line":2,"column":380}},{"source":"node_modules/cloudinary/lib/auth_token.js","name":"options","original":{"line":49,"column":6},"generated":{"line":2,"column":386}},{"source":"node_modules/cloudinary/lib/auth_token.js","name":"expiration","original":{"line":49,"column":14},"generated":{"line":2,"column":388}},{"source":"node_modules/cloudinary/lib/auth_token.js","original":{"line":49,"column":34},"generated":{"line":2,"column":399}},{"source":"node_modules/cloudinary/lib/auth_token.js","name":"options","original":{"line":50,"column":8},"generated":{"line":2,"column":400}},{"source":"node_modules/cloudinary/lib/auth_token.js","original":{"line":50,"column":28},"generated":{"line":2,"column":403}},{"source":"node_modules/cloudinary/lib/auth_token.js","name":"options","original":{"line":50,"column":8},"generated":{"line":2,"column":409}},{"source":"node_modules/cloudinary/lib/auth_token.js","name":"duration","original":{"line":50,"column":16},"generated":{"line":2,"column":411}},{"source":"node_modules/cloudinary/lib/auth_token.js","original":{"line":54,"column":12},"generated":{"line":2,"column":420}},{"source":"node_modules/cloudinary/lib/auth_token.js","original":{"line":54,"column":12},"generated":{"line":2,"column":426}},{"source":"node_modules/cloudinary/lib/auth_token.js","name":"Error","original":{"line":54,"column":16},"generated":{"line":2,"column":430}},{"source":"node_modules/cloudinary/lib/auth_token.js","original":{"line":54,"column":22},"generated":{"line":2,"column":436}},{"source":"node_modules/cloudinary/lib/auth_token.js","original":{"line":50,"column":34},"generated":{"line":2,"column":482}},{"source":"node_modules/cloudinary/lib/auth_token.js","name":"start","original":{"line":51,"column":10},"generated":{"line":2,"column":483}},{"source":"node_modules/cloudinary/lib/auth_token.js","name":"start","original":{"line":51,"column":10},"generated":{"line":2,"column":487}},{"source":"node_modules/cloudinary/lib/auth_token.js","original":{"line":51,"column":40},"generated":{"line":2,"column":489}},{"source":"node_modules/cloudinary/lib/auth_token.js","name":"options","original":{"line":51,"column":18},"generated":{"line":2,"column":495}},{"source":"node_modules/cloudinary/lib/auth_token.js","name":"start_time","original":{"line":51,"column":26},"generated":{"line":2,"column":497}},{"source":"node_modules/cloudinary/lib/auth_token.js","name":"options","original":{"line":51,"column":47},"generated":{"line":2,"column":508}},{"source":"node_modules/cloudinary/lib/auth_token.js","name":"start_time","original":{"line":51,"column":55},"generated":{"line":2,"column":510}},{"source":"node_modules/cloudinary/lib/auth_token.js","name":"Math","original":{"line":51,"column":68},"generated":{"line":2,"column":521}},{"source":"node_modules/cloudinary/lib/auth_token.js","name":"round","original":{"line":51,"column":73},"generated":{"line":2,"column":526}},{"source":"node_modules/cloudinary/lib/auth_token.js","name":"Date","original":{"line":51,"column":79},"generated":{"line":2,"column":532}},{"source":"node_modules/cloudinary/lib/auth_token.js","name":"now","original":{"line":51,"column":84},"generated":{"line":2,"column":537}},{"source":"node_modules/cloudinary/lib/auth_token.js","original":{"line":51,"column":92},"generated":{"line":2,"column":543}},{"source":"node_modules/cloudinary/lib/auth_token.js","name":"options","original":{"line":52,"column":6},"generated":{"line":2,"column":548}},{"source":"node_modules/cloudinary/lib/auth_token.js","name":"expiration","original":{"line":52,"column":14},"generated":{"line":2,"column":550}},{"source":"node_modules/cloudinary/lib/auth_token.js","name":"start","original":{"line":52,"column":27},"generated":{"line":2,"column":561}},{"source":"node_modules/cloudinary/lib/auth_token.js","name":"options","original":{"line":52,"column":35},"generated":{"line":2,"column":563}},{"source":"node_modules/cloudinary/lib/auth_token.js","name":"duration","original":{"line":52,"column":43},"generated":{"line":2,"column":565}},{"source":"node_modules/cloudinary/lib/auth_token.js","name":"tokenParts","original":{"line":57,"column":6},"generated":{"line":2,"column":575}},{"source":"node_modules/cloudinary/lib/auth_token.js","name":"tokenParts","original":{"line":57,"column":6},"generated":{"line":2,"column":579}},{"source":"node_modules/cloudinary/lib/auth_token.js","original":{"line":57,"column":19},"generated":{"line":2,"column":581}},{"source":"node_modules/cloudinary/lib/auth_token.js","original":{"line":58,"column":20},"generated":{"line":2,"column":584}},{"source":"node_modules/cloudinary/lib/auth_token.js","name":"options","original":{"line":58,"column":6},"generated":{"line":2,"column":590}},{"source":"node_modules/cloudinary/lib/auth_token.js","name":"ip","original":{"line":58,"column":14},"generated":{"line":2,"column":592}},{"source":"node_modules/cloudinary/lib/auth_token.js","name":"tokenParts","original":{"line":59,"column":4},"generated":{"line":2,"column":596}},{"source":"node_modules/cloudinary/lib/auth_token.js","name":"push","original":{"line":59,"column":15},"generated":{"line":2,"column":598}},{"source":"node_modules/cloudinary/lib/auth_token.js","name":"options","original":{"line":59,"column":26},"generated":{"line":2,"column":609}},{"source":"node_modules/cloudinary/lib/auth_token.js","name":"ip","original":{"line":59,"column":34},"generated":{"line":2,"column":611}},{"source":"node_modules/cloudinary/lib/auth_token.js","original":{"line":61,"column":28},"generated":{"line":2,"column":617}},{"source":"node_modules/cloudinary/lib/auth_token.js","name":"options","original":{"line":61,"column":6},"generated":{"line":2,"column":623}},{"source":"node_modules/cloudinary/lib/auth_token.js","name":"start_time","original":{"line":61,"column":14},"generated":{"line":2,"column":625}},{"source":"node_modules/cloudinary/lib/auth_token.js","name":"tokenParts","original":{"line":62,"column":4},"generated":{"line":2,"column":637}},{"source":"node_modules/cloudinary/lib/auth_token.js","name":"push","original":{"line":62,"column":15},"generated":{"line":2,"column":639}},{"source":"node_modules/cloudinary/lib/auth_token.js","name":"options","original":{"line":62,"column":26},"generated":{"line":2,"column":650}},{"source":"node_modules/cloudinary/lib/auth_token.js","name":"start_time","original":{"line":62,"column":34},"generated":{"line":2,"column":652}},{"source":"node_modules/cloudinary/lib/auth_token.js","name":"tokenParts","original":{"line":64,"column":2},"generated":{"line":2,"column":666}},{"source":"node_modules/cloudinary/lib/auth_token.js","name":"push","original":{"line":64,"column":13},"generated":{"line":2,"column":668}},{"source":"node_modules/cloudinary/lib/auth_token.js","name":"options","original":{"line":64,"column":25},"generated":{"line":2,"column":680}},{"source":"node_modules/cloudinary/lib/auth_token.js","name":"expiration","original":{"line":64,"column":33},"generated":{"line":2,"column":682}},{"source":"node_modules/cloudinary/lib/auth_token.js","original":{"line":65,"column":21},"generated":{"line":2,"column":696}},{"source":"node_modules/cloudinary/lib/auth_token.js","name":"options","original":{"line":65,"column":6},"generated":{"line":2,"column":702}},{"source":"node_modules/cloudinary/lib/auth_token.js","name":"acl","original":{"line":65,"column":14},"generated":{"line":2,"column":704}},{"source":"node_modules/cloudinary/lib/auth_token.js","name":"tokenParts","original":{"line":66,"column":4},"generated":{"line":2,"column":709}},{"source":"node_modules/cloudinary/lib/auth_token.js","name":"push","original":{"line":66,"column":15},"generated":{"line":2,"column":711}},{"source":"node_modules/cloudinary/lib/auth_token.js","name":"escapeToLower","original":{"line":66,"column":27},"generated":{"line":2,"column":723}},{"source":"node_modules/cloudinary/lib/auth_token.js","name":"options","original":{"line":66,"column":41},"generated":{"line":2,"column":725}},{"source":"node_modules/cloudinary/lib/auth_token.js","name":"acl","original":{"line":66,"column":49},"generated":{"line":2,"column":727}},{"source":"node_modules/cloudinary/lib/auth_token.js","name":"toSign","original":{"line":68,"column":6},"generated":{"line":2,"column":735}},{"source":"node_modules/cloudinary/lib/auth_token.js","name":"toSign","original":{"line":68,"column":6},"generated":{"line":2,"column":739}},{"source":"node_modules/cloudinary/lib/auth_token.js","original":{"line":68,"column":15},"generated":{"line":2,"column":741}},{"source":"node_modules/cloudinary/lib/auth_token.js","name":"tokenParts","original":{"line":68,"column":19},"generated":{"line":2,"column":745}},{"source":"node_modules/cloudinary/lib/auth_token.js","name":"options","original":{"line":69,"column":6},"generated":{"line":2,"column":748}},{"source":"node_modules/cloudinary/lib/auth_token.js","original":{"line":69,"column":21},"generated":{"line":2,"column":751}},{"source":"node_modules/cloudinary/lib/auth_token.js","name":"options","original":{"line":69,"column":6},"generated":{"line":2,"column":757}},{"source":"node_modules/cloudinary/lib/auth_token.js","name":"url","original":{"line":69,"column":14},"generated":{"line":2,"column":759}},{"source":"node_modules/cloudinary/lib/auth_token.js","original":{"line":69,"column":44},"generated":{"line":2,"column":764}},{"source":"node_modules/cloudinary/lib/auth_token.js","name":"options","original":{"line":69,"column":29},"generated":{"line":2,"column":770}},{"source":"node_modules/cloudinary/lib/auth_token.js","name":"acl","original":{"line":69,"column":37},"generated":{"line":2,"column":772}},{"source":"node_modules/cloudinary/lib/auth_token.js","original":{"line":69,"column":50},"generated":{"line":2,"column":776}},{"source":"node_modules/cloudinary/lib/auth_token.js","name":"url","original":{"line":70,"column":8},"generated":{"line":2,"column":777}},{"source":"node_modules/cloudinary/lib/auth_token.js","name":"url","original":{"line":70,"column":8},"generated":{"line":2,"column":781}},{"source":"node_modules/cloudinary/lib/auth_token.js","name":"escapeToLower","original":{"line":70,"column":14},"generated":{"line":2,"column":783}},{"source":"node_modules/cloudinary/lib/auth_token.js","name":"options","original":{"line":70,"column":28},"generated":{"line":2,"column":785}},{"source":"node_modules/cloudinary/lib/auth_token.js","name":"url","original":{"line":70,"column":36},"generated":{"line":2,"column":787}},{"source":"node_modules/cloudinary/lib/auth_token.js","name":"toSign","original":{"line":71,"column":4},"generated":{"line":2,"column":792}},{"source":"node_modules/cloudinary/lib/auth_token.js","name":"push","original":{"line":71,"column":11},"generated":{"line":2,"column":794}},{"source":"node_modules/cloudinary/lib/auth_token.js","name":"url","original":{"line":71,"column":23},"generated":{"line":2,"column":806}},{"source":"node_modules/cloudinary/lib/auth_token.js","name":"auth","original":{"line":73,"column":6},"generated":{"line":2,"column":811}},{"source":"node_modules/cloudinary/lib/auth_token.js","name":"auth","original":{"line":73,"column":6},"generated":{"line":2,"column":815}},{"source":"node_modules/cloudinary/lib/auth_token.js","name":"digest","original":{"line":73,"column":13},"generated":{"line":2,"column":817}},{"source":"node_modules/cloudinary/lib/auth_token.js","name":"toSign","original":{"line":73,"column":20},"generated":{"line":2,"column":819}},{"source":"node_modules/cloudinary/lib/auth_token.js","name":"join","original":{"line":73,"column":27},"generated":{"line":2,"column":821}},{"source":"node_modules/cloudinary/lib/auth_token.js","original":{"line":48,"column":25},"generated":{"line":2,"column":826}},{"source":"node_modules/cloudinary/lib/auth_token.js","name":"options","original":{"line":73,"column":49},"generated":{"line":2,"column":831}},{"source":"node_modules/cloudinary/lib/auth_token.js","name":"key","original":{"line":73,"column":57},"generated":{"line":2,"column":833}},{"source":"node_modules/cloudinary/lib/auth_token.js","original":{"line":76,"column":6},"generated":{"line":2,"column":838}},{"source":"node_modules/cloudinary/lib/auth_token.js","name":"tokenParts","original":{"line":74,"column":2},"generated":{"line":2,"column":841}},{"source":"node_modules/cloudinary/lib/auth_token.js","name":"push","original":{"line":74,"column":13},"generated":{"line":2,"column":843}},{"source":"node_modules/cloudinary/lib/auth_token.js","name":"auth","original":{"line":74,"column":26},"generated":{"line":2,"column":856}},{"source":"node_modules/cloudinary/lib/auth_token.js","name":"options","original":{"line":76,"column":7},"generated":{"line":2,"column":862}},{"source":"node_modules/cloudinary/lib/auth_token.js","name":"url","original":{"line":76,"column":15},"generated":{"line":2,"column":864}},{"source":"node_modules/cloudinary/lib/auth_token.js","name":"options","original":{"line":76,"column":23},"generated":{"line":2,"column":870}},{"source":"node_modules/cloudinary/lib/auth_token.js","name":"acl","original":{"line":76,"column":31},"generated":{"line":2,"column":872}},{"source":"node_modules/cloudinary/lib/auth_token.js","original":{"line":77,"column":10},"generated":{"line":2,"column":876}},{"source":"node_modules/cloudinary/lib/auth_token.js","original":{"line":77,"column":10},"generated":{"line":2,"column":881}},{"source":"node_modules/cloudinary/lib/auth_token.js","original":{"line":80,"column":10},"generated":{"line":2,"column":938}},{"source":"node_modules/cloudinary/lib/auth_token.js","name":"tokenName","original":{"line":80,"column":12},"generated":{"line":2,"column":947}},{"source":"node_modules/cloudinary/lib/auth_token.js","name":"tokenParts","original":{"line":80,"column":25},"generated":{"line":2,"column":952}},{"source":"node_modules/cloudinary/lib/auth_token.js","name":"join","original":{"line":80,"column":36},"generated":{"line":2,"column":954}},{"source":"node_modules/cloudinary/lib/auth_token.js","original":{"line":48,"column":25},"generated":{"line":2,"column":959}}],"sources":{"node_modules/cloudinary/lib/auth_token.js":"/**\n * Authorization Token\n * @module auth_token\n */\n\nconst crypto = require('crypto');\nconst smart_escape = require('./utils/encoding/smart_escape');\n\nconst unsafe = /([ \"#%&'/:;<=>?@[\\]^`{|}~]+)/g;\n\nfunction digest(message, key) {\n  return crypto.createHmac(\"sha256\", Buffer.from(key, \"hex\")).update(message).digest('hex');\n}\n\n/**\n * Escape url using lowercase hex code\n * @param {string} url a url string\n * @return {string} escaped url\n */\nfunction escapeToLower(url) {\n  const safeUrl = smart_escape(url, unsafe);\n  return safeUrl.replace(/%../g, function (match) {\n    return match.toLowerCase();\n  });\n}\n\n/**\n * Auth token options\n * @typedef {object} authTokenOptions\n * @property {string} [token_name=\"__cld_token__\"] The name of the token.\n * @property {string} key The secret key required to sign the token.\n * @property {string} ip The IP address of the client.\n * @property {number} start_time=now The start time of the token in seconds from epoch.\n * @property {string} expiration The expiration time of the token in seconds from epoch.\n * @property {string} duration The duration of the token (from start_time).\n * @property {string} acl The ACL for the token.\n * @property {string} url The URL to authentication in case of a URL token.\n *\n */\n\n/**\n * Generate an authorization token\n * @param {authTokenOptions} options\n * @returns {string} the authorization token\n */\nmodule.exports = function (options) {\n  const tokenName = options.token_name ? options.token_name : \"__cld_token__\";\n  const tokenSeparator = \"~\";\n  if (options.expiration == null) {\n    if (options.duration != null) {\n      let start = options.start_time != null ? options.start_time : Math.round(Date.now() / 1000);\n      options.expiration = start + options.duration;\n    } else {\n      throw new Error(\"Must provide either expiration or duration\");\n    }\n  }\n  let tokenParts = [];\n  if (options.ip != null) {\n    tokenParts.push(`ip=${options.ip}`);\n  }\n  if (options.start_time != null) {\n    tokenParts.push(`st=${options.start_time}`);\n  }\n  tokenParts.push(`exp=${options.expiration}`);\n  if (options.acl != null) {\n    tokenParts.push(`acl=${escapeToLower(options.acl)}`);\n  }\n  let toSign = [...tokenParts];\n  if (options.url != null && options.acl == null) {\n    let url = escapeToLower(options.url);\n    toSign.push(`url=${url}`);\n  }\n  let auth = digest(toSign.join(tokenSeparator), options.key);\n  tokenParts.push(`hmac=${auth}`);\n\n  if (!options.url && !options.acl) {\n    throw 'authToken must contain either an acl or a url property'\n  }\n\n  return `${tokenName}=${tokenParts.join(tokenSeparator)}`;\n};\n"},"lineCount":null}},"error":null,"hash":"6b1d507f59edaae39c712dce015a9032","cacheData":{"env":{}}}